"use strict";let PROJECTS_ENDPOINT="/deploy/projects",REGIONS_ENDPOINT="/deploy/projects/<project>/regions",DEPLOY_ENDPOINT="/deploy/projects/<project>/regions/<region>/demos/<id>",DEMO_LIST="/demos",DEMO_GET="/demos/<id>",DEMO_CREATE="/demos",DEMO_UPDATE="/demos/<id>",DEMO_DELETE="/demos/<id>",DEPLOYMENT_LIST="/deployments",demoList=[],myDemoList=[],projectList=[],regionList=["asia-east1","asia-east2","asia-northeast1","asia-northeast2","asia-northeast3","asia-south1","asia-south2","asia-southeast1","asia-southeast2","australia-southeast1","australia-southeast2","europe-central2","europe-north1","europe-southwest1","europe-west1","europe-west2","europe-west3","europe-west4","europe-west6","europe-west8","europe-west9","me-west1","northamerica-northeast1","northamerica-northeast2","southamerica-east1","southamerica-west1","us-central1","us-central2","us-east1","us-east4","us-east5","us-east7","us-south1","us-west1","us-west2","us-west3","us-west4"];function generateUUID(){var e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(o){var n=16*Math.random();return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),("x"===o?n:3&n|8).toString(16)}))}function formData2JSON(e){var t=new FormData(e);return Object.fromEntries(Array.from(t.keys()).map((e=>[e,t.getAll(e).length>1?t.getAll(e):t.get(e)])))}function setHashPath(e){location.hash==="#"+e||(location.hash=e)}function getHashPath(){return location.hash.length>0?location.hash.substring(1):""}let btnSidebarToggle=document.querySelector(".toggle-sidebar-btn");btnSidebarToggle&&btnSidebarToggle.addEventListener("click",(function(e){document.body.classList.toggle("toggle-sidebar")}));let btnSearchbarToggle=document.querySelector(".search-bar-toggle");btnSearchbarToggle&&btnSearchbarToggle.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),document.querySelector(".search-bar").classList.toggle("search-bar-show")}));let backtotop=document.querySelector(".back-to-top");if(backtotop){backtotop.onclick=function(e){e.preventDefault(),e.stopPropagation(),window.scrollTo({top:0,behavior:"smooth"})};const e=function(){window.scrollY>100?backtotop.classList.add("active"):backtotop.classList.remove("active")};window.addEventListener("load",e),document.addEventListener("scroll",e)}var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map((function(e){return new bootstrap.Tooltip(e)}));const Keys={Backspace:"Backspace",Clear:"Clear",Down:"ArrowDown",End:"End",Enter:"Enter",Escape:"Escape",Home:"Home",Left:"ArrowLeft",PageDown:"PageDown",PageUp:"PageUp",Right:"ArrowRight",Space:" ",Tab:"Tab",Up:"ArrowUp"},MenuActions={Others:-1,Close:0,CloseSelect:1,First:2,Last:3,Next:4,Open:5,Previous:6,Select:7,Space:8,Type:9,Tab:10};function getActionFromKey(e,t){const{key:o,altKey:n,ctrlKey:i,metaKey:s}=e;return t||o!==Keys.Down&&o!==Keys.Enter&&o!==Keys.Space?o===Keys.Down?MenuActions.Next:o===Keys.Up?MenuActions.Previous:o===Keys.Home?MenuActions.First:o===Keys.End?MenuActions.Last:o===Keys.Escape?MenuActions.Close:o===Keys.Enter?MenuActions.CloseSelect:o===Keys.Space?MenuActions.Space:o===Keys.Tab?MenuActions.Tab:o!==Keys.Backspace&&o!==Keys.Clear&&(1!==o.length||n||i||s)?MenuActions.Others:MenuActions.Type:MenuActions.Open}const Combobox=function(e,t){this.el=e,this.inputEl=e.querySelector("input"),this.listboxEl=e.querySelector("[role=listbox]"),this.idBase=this.inputEl.id,this.options=t.sort(),this.curInputValue="",this.inputEl.value="",this.activeIndex=-1,this.open=!1};function initCombo(e,t,o,n){const i=document.querySelector(e);new Combobox(i,t).init(o,n)}Combobox.prototype.init=function(e,t){this.forceSelect=e||!1,this.callback=t,this.inputEl.addEventListener("input",this.onInput.bind(this)),this.inputEl.addEventListener("blur",this.onInputBlur.bind(this)),this.inputEl.addEventListener("click",(()=>this.updateMenuState(!0))),this.inputEl.addEventListener("keydown",this.onInputKeyDown.bind(this)),this.options.map(((e,t)=>{const o=document.createElement("li");o.setAttribute("role","option"),o.id=`${this.idBase}-${t}`,o.className="combo-option",o.setAttribute("aria-selected","false"),o.innerText=e,o.addEventListener("click",(()=>{this.onOptionClick(t)})),o.addEventListener("mousedown",this.onOptionMouseDown.bind(this)),this.listboxEl.appendChild(o)}))},Combobox.prototype.onInput=function(){const e=this.inputEl.value,t=this.options.filter((t=>0===t.toLowerCase().indexOf(e.toLowerCase())));if(t.length>0){let o=this.options.indexOf(e),n=this.options.indexOf(t[0]);this.onOptionChange(o,n)}const o=this.options.length>0;this.open!==o&&this.updateMenuState(o,!1)},Combobox.prototype.onInputKeyDown=function(e){const t=this.options.length-1,o=getActionFromKey(e,this.open);switch(o){case MenuActions.Close:return e.preventDefault(),this.updateMenuState(!1);case MenuActions.Open:return e.preventDefault(),this.updateMenuState(!0);case MenuActions.Next:case MenuActions.Last:case MenuActions.First:case MenuActions.Previous:e.preventDefault();let n=this.activeIndex;switch(o){case MenuActions.First:n=0;break;case MenuActions.Last:n=t;break;case MenuActions.Previous:n=Math.max(0,n-1);break;case MenuActions.Next:n=Math.min(t,n+1)}return this.onOptionChange(n,n);case MenuActions.CloseSelect:if(e.preventDefault(),this.open){let e=this.el.querySelectorAll(".combo-option.option-current");if(e.length>0){let t=e[0].id.match(/^(.*)-([0-9]*)$/)[2];if(t!==this.activeIndex)return this.onOptionChange(t,t),this.selectOption(t),this.updateMenuState(!1)}if(e=this.el.querySelectorAll(".combo-option:hover"),e.length>0){let t=e[0].id.match(/^(.*)-([0-9]*)$/)[2];if(t!==this.activeIndex)return this.onOptionChange(t,t),this.selectOption(t),this.updateMenuState(!1)}}let i=this.options.indexOf(this.inputEl.value.trim());return this.forceSelect?(-1===i&&(i=this.defaultIndex),this.onOptionChange(i,i),this.selectOption(i)):(this.activeIndex=i,this.onOptionChange(i,i),this.selectOption(i)),this.updateMenuState(!1)}},Combobox.prototype.onInputBlur=function(){if(this.ignoreBlur)return void(this.ignoreBlur=!1);let e=this.inputEl.value.trim(),t=this.options.indexOf(e);this.forceSelect&&-1===t&&(this.inputEl.value=""),this.activeIndex=t,this.onOptionChange(t,t),this.selectOption(t),e=this.options[this.activeIndex],""!==e&&this.curInputValue!==e&&(this.curInputValue=e,this.callback&&this.callback(this.curInputValue)),this.open&&this.updateMenuState(!1,!1)},Combobox.prototype.onOptionChange=function(e,t){-1!==e&&(this.activeIndex=e,this.inputEl.setAttribute("aria-activedescendant",`${this.idBase}-${e}`));const o=this.el.querySelectorAll("[role=option]");var n;[...o].forEach((e=>{e.classList.remove("option-current")})),-1!==e&&o[e].classList.add("option-current"),this.open&&-1!==t&&((n=this.listboxEl)&&n.clientHeight<n.scrollHeight)&&this.listboxEl.scrollTo(0,o[t].offsetTop)},Combobox.prototype.onOptionClick=function(e){this.onOptionChange(e,e),this.selectOption(e),this.updateMenuState(!1)},Combobox.prototype.onOptionMouseDown=function(){this.ignoreBlur=!0},Combobox.prototype.selectOption=function(e){-1!==e&&(this.activeIndex=e,this.inputEl.value=this.options[e]);const t=this.el.querySelectorAll("[role=option]");[...t].forEach((e=>{e.setAttribute("aria-selected","false")})),-1!==e&&t[e].setAttribute("aria-selected","true")},Combobox.prototype.updateMenuState=function(e,t=!0){this.open=e,this.inputEl.setAttribute("aria-expanded",`${e}`),e?this.el.classList.add("open"):this.el.classList.remove("open"),t&&this.inputEl.focus()};let curHashPath,prevHashPath,BREADCRUMB_LABELS={dashboard:"Dashboard",demos:"Demos","demo-list":"Demo List","my-demos":"My Demos","demo-onboard":"Onboard Demo","demo-update":"Update Demo","demo-deploy":"Deploy Demo",oss:"OSS",agones:"Agones","open-match":"Open Match","open-saves":"Open Saves","clean-chat":"Clean Chat",quilkin:"Quilkin"};function updateBreadcrumb(e){let t='<li class="breadcrumb-item active">Home</li>',o=e.split("/");if(o.length>2){t='<li class="breadcrumb-item"><a href="#/dashboard">Home</a></li>';for(let e=1;e<o.length;e++)BREADCRUMB_LABELS[o[e]]&&(t+=`<li class="breadcrumb-item active">${BREADCRUMB_LABELS[o[e]]}</li>`)}document.querySelector("#breadcrumb").innerHTML=t}function updateSidebarSelected(){let e=document.querySelector(`a[href="#${prevHashPath}"]`);e&&e.classList.remove("active"),e=document.querySelector(`a[href="#${curHashPath}"]`),e&&e.classList.add("active")}function getDemoById(e){for(let t=0;t<demoList.length;t++){let o=demoList[t];if(e===o.id)return o}return null}function updateDemoList(e){for(let t=0;t<demoList.length;t++){let o=demoList[t];e.id===o.id&&(demoList[t]=e)}}function showDemoList(){function e(e){if(document.querySelector("#txtUserEmail").innerHTML.indexOf("@google.com")>-1){return`<button class="btn btn-outline-danger btn-sm float-end" onclick="deleteDemo('${e}')">Delete</button>\n        <button class="btn btn-outline-success btn-sm float-end me-2" onclick="updateDemo('${e}')">Update</button>`}return""}if(demoList.length>0){let t="",o=demoList.length;for(let n=0;n<o;n++)t+=`<div class="col-lg-4">\n          <div class="card">\n            <div class="card-body">\n              <h5 class="card-title">\n                ${demoList[n].name} \n                <i class="bi bi-link-45deg clipboard" onclick="copyDemoLink('${demoList[n].id}')" title="Click to copy the demo link"></i>\n              </h5>\n              <span>${demoList[n].description}</span>\n            </div>\n            <div class="card-footer text-end">\n              <button class="btn btn-outline-primary btn-sm float-start" onclick="deployDemo('${demoList[n].id}')"><i class="bi bi-cloud-arrow-up-fill me-1"></i>Deploy</button>\n              ${e(demoList[n].id)}\n            </div>\n          </div>\n        </div>`;document.querySelector("#demoListInfo").innerHTML="",document.querySelector("#demoList").innerHTML=t}else document.querySelector("#demoListInfo").innerHTML='<div class="alert alert-info alert-dismissible fade show" role="alert">\n      <i class="bi bi-info-circle me-1"></i> No demos available to show.\n    </div>',document.querySelector("#demoList").innerHTML=""}function showDemoListPage(){document.querySelector("#mainContent").innerHTML=`<div class="row mb-3">\n      <div id="demoListInfo" class="col-6"></div>\n      <div class="col-6 text-end">\n        ${function(){if(document.querySelector("#txtUserEmail").innerHTML.indexOf("@google.com")>-1){return'<button id="btnOnboard" class="btn btn-outline-primary btn-sm" onclick="setHashPath(\'/demos/demo-onboard\')"><i class="bi bi-box-arrow-in-right me-1"></i>Onboard Demo</button>'}return""}()}\n      </div>\n    </div>\n    <div id="demoList" class="row"></div>`,0===demoList.length?makeAjaxRequest(DEMO_LIST,null,(function(e){demoList=e.demos,showDemoList()})):showDemoList()}function showDemoFormPage(e,t){let o={id:"",name:"",contact:"",description:"",repository_url:"",deploy_url:"",undeploy_url:""};if(t)if(o=getDemoById(t),o)showDemoForm(e,o);else{makeAjaxRequest(DEMO_GET.replace("<id>",t),{method:"GET"},(function(t){showDemoForm(e,t)}))}else showDemoForm(e,o)}function showDemoForm(e,t){document.querySelector("#mainContent").innerHTML=`<div class="row">\n      <div class="col-lg-3"></div>\n      <div class="col-lg-6">\n        <div class="accordion mb-3" id="accordion">\n          <div class="accordion-item">\n            <h3 class="accordion-header" id="headingOne">\n              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"> \n                ${e}\n              </button>\n            </h3>\n            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordion">\n              <div class="accordion-body"> \n                <form id="frmDemoInfo" name="frmDemoInfo" class="row g-3 needs-validation" novalidate="" onsubmit="return false;">  \n                  <input name="id" value="${t.id}" type="hidden">\n                  <div class="col-12"> \n                    <label for="inputName" class="form-label">Demo Name / Title:</label>\n                    <input id="inputName" name="name" value="${t.name}" type="text" class="form-control" required="">\n                    <div class="invalid-feedback">Please provide a name / title.</div>\n                  </div>\n                  <div class="col-12"> \n                    <label for="inputContact" class="form-label">Demo Owner Aliases:</label>\n                    <input id="inputContact" name="contact" value="${t.contact}" type="text" class="form-control" placeholder="alias@google.com, alias" required="">\n                    <div class="invalid-feedback">Please provide alias or email separated by comma.</div>\n                  </div>\n                  <div class="col-12"> \n                    <label for="inputDescription" class="form-label">Description:</label>\n                    <textarea id="inputDescription" name="description" class="form-control" required="">${t.description}</textarea>\n                    <div class="invalid-feedback">Please provide a description.</div>\n                  </div>\n                  <div class="col-12"> \n                    <label for="inputRepoUrl" class="form-label">Github Repo URL:</label>\n                    <input id="inputRepoUrl" name="repository_url" value="${t.repository_url}" type="text" class="form-control" required="">\n                    <div class="invalid-feedback">Please provide the Github repository URL.</div>\n                  </div>\n                  <div class="col-12"> \n                    <label for="inputDeployUrl" class="form-label">Deploy Script URL:</label>\n                    <input id="inputDeployUrl" name="deploy_url" value="${t.deploy_url}" type="text" class="form-control" required="">\n                    <div class="invalid-feedback">Please provide the deploy script URL.</div>\n                  </div>\n                  <div class="col-12"> \n                    <label for="inputUndeployUrl" class="form-label">Undeploy Script URL:</label>\n                    <input id="inputUndeployUrl" name="undeploy_url" value="${t.undeploy_url}" type="text" class="form-control" placeholder="Nice to have">\n                    <div class="invalid-feedback">Please provide the deploy script URL.</div>\n                  </div>\n                  <div class="text-center"> \n                    <button class="btn btn-outline-primary btn-sm me-3" type="submit">Save Demo</button>\n                    <button class="btn btn-outline-secondary btn-sm" type="reset">Cancel</button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="col-lg-3"></div>\n    </div>`;var o=document.querySelector("#frmDemoInfo");o.addEventListener("submit",(function(e){if(e.preventDefault(),e.stopPropagation(),o.checkValidity()){var t=formData2JSON(o);if(""===t.id)t.id=generateUUID(),makeAjaxRequest(DEMO_CREATE,{method:"POST",body:JSON.stringify(t)},(function(e){demoList.push(t),setHashPath("/demos/demo-list"),addNotification(`<b>${(new Date).toLocaleString()}</b>: The demo - ${t.name} has been created successfully.`,!1)}));else{makeAjaxRequest(DEMO_UPDATE.replace("<id>",t.id),{method:"PUT",body:JSON.stringify(t)},(function(e){updateDemoList(t),setHashPath("/demos/demo-list"),addNotification(`<b>${(new Date).toLocaleString()}</b>: The demo - ${t.name} has been updated successfully.`,!1)}))}console.log(JSON.stringify(t))}o.classList.add("was-validated")}),!1),o.addEventListener("reset",(function(e){o.classList.remove("was-validated"),setHashPath("/demos/demo-list")}),!1)}function showDemoDeployPage(e,t){let o="",n=getDemoById(t);if(n&&(o=n.name),document.querySelector("#mainContent").innerHTML=`<div class="row">\n      <div class="col-lg-3"></div>\n      <div class="col-lg-6">\n        <div class="accordion mb-3" id="accordion">\n          <div class="accordion-item">\n            <h3 class="accordion-header" id="headingOne">\n              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"> \n                ${e}\n              </button>\n            </h3>\n            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordion">\n              <div class="accordion-body"> \n                <form id="frmDemoDeploy" name="frmDemoDeploy" class="row g-3 needs-validation" novalidate="" onsubmit="return false;">  \n                  <input name="demo_id" value="${t}" type="hidden">\n                  <div class="col-12"> \n                    <label for="inputName" class="form-label">Demo Name:</label>\n                    <div id="inputName" class="form-control">${o}</div>\n                  </div>\n                  <div class="col-12">\n                    <label for="comboProject" class="form-label">GCP Project:</label>\n                    <div class="combo js-combobox-project">\n                      <input\n                        id="comboProject"\n                        name="project_id"\n                        aria-activedescendant=""\n                        aria-autocomplete="none"\n                        aria-controls="listProject"\n                        aria-expanded="false"\n                        aria-haspopup="listbox"\n                        class="form-select"\n                        role="combobox"\n                        type="text"\n                        placeholder="Select or enter a project"\n                        required=""\n                      />\n                      <ul id="listProject" class="combo-menu" role="listbox"></ul>\n                      <div class="invalid-feedback">Please select or enter a project.</div>\n                    </div>\n                  </div>\n                  <div class="col-12">\n                    <label for="comboRegion" class="form-label">GCP Region:</label>\n                    <div class="combo js-combobox-region">\n                      <input\n                        id="comboRegion"\n                        name="region"\n                        aria-activedescendant=""\n                        aria-autocomplete="none"\n                        aria-controls="listRegion"\n                        aria-expanded="false"\n                        aria-haspopup="listbox"\n                        class="form-select"\n                        role="combobox"\n                        type="text"\n                        placeholder="Select a region"\n                        required=""\n                      />\n                      <ul id="listRegion" class="combo-menu" role="listbox"></ul>\n                      <div class="invalid-feedback">Please select a region.</div>\n                    </div>\n                  </div>\n                  <div class="col-12"> \n                    <input class="form-check-input" id="inputAgree" name="agree" type="checkbox" value="yes" required=""> <label class="form-check-label" for="invalidCheck"> Agree to Terms and Conditions </label>\n                    <div class="invalid-feedback">You must agree before deploying.</div>\n                    <div class="disclaimer form-control">\n                      Google Cloud grants you a non-exclusive copyright license to use all programming code examples from which you can generate similar function tailored to your own specific needs.<br/><br/>\n                      Subject to any statutory warranties which cannot be excluded, Google Cloud, its program developers and suppliers make no warranties or conditions either express or implied, including but not limited to, the implied warranties or conditions of merchantability, fitness for a particular purpose, and non-infringement, regarding the program or technical support, if any.<br/><br/>\n                      Under no circumstances is Google Cloud, its program developers or suppliers liable for any of the following, even if informed of their possibility:<br/><br/>1. Loss of, or damage to, data;<br/>2. Direct, special, incidental, or indirect damages, or for any economic consequential damages; or<br/>3. Lost profits, business, revenue, goodwill, or anticipated savings.<br/><br/>\n                      Some jurisdictions do not allow the exclusion or limitation of direct, incidental, or consequential damages, so some or all of the above limitations or exclusions may not apply to you.\n                    </div>\n                  </div>\n                  <div class="text-center"> \n                    <button class="btn btn-outline-primary btn-sm me-3" type="submit">Deploy Demo</button>\n                    <button class="btn btn-outline-secondary btn-sm" type="reset">Cancel</button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="col-lg-3"></div>\n    </div>`,updateProjectList(),initCombo(".js-combobox-region",regionList,!0),""===o){makeAjaxRequest(DEMO_GET.replace("<id>",t),{method:"GET"},(function(e){document.querySelector("#inputName").innerHTML=e.name}))}var i=document.querySelector("#frmDemoDeploy");i.addEventListener("submit",(function(e){if(e.preventDefault(),e.stopPropagation(),i.checkValidity()){var t=formData2JSON(i);console.log(JSON.stringify(t)),deploy(t)}i.classList.add("was-validated")}),!1),i.addEventListener("reset",(function(e){i.classList.remove("was-validated"),setHashPath("/demos/demo-list")}),!1)}function updateMyDemoList(e,t){let o=!1;for(let n=0;n<myDemoList.length;n++)myDemoList[n].demo_id==e&&(o=!0,myDemoList[n].deployments.push(t));if(!o){let o=getDemoById(e);o&&myDemoList.push({demo_id:o.id,name:o.name,description:o.description,undeploy_url:o.undeploy_url,deployments:[t]})}}function showMyDemoList(){function e(e){if(e.undeploy_url&&""!==e.undeploy_url.trim()){return`<button class="btn btn-outline-danger btn-sm float-end" onclick="undeployDemo('${e.demo_id}')">Undeploy</button>`}return""}function t(e){let t="",o=e.deployments.length;for(let n=0;n<o;n++){let i=e.deployments[n];t+=`<span>${"DEPLOYED"==i.status?"Deployed in":"Undeployed from"} Project: ${i.project_id} and Region: ${i.region} at ${i.deployed_at}. <a target="_blank" href="${i.log_url}">Log and status</a></span>`,n!==o-1&&(t+="<hr/>")}return t}if(myDemoList.length>0){let o="",n=myDemoList.length;for(let i=0;i<n;i++){let n=myDemoList[i];o+=`<div class="col-lg-4">\n          <div class="card">\n            <div class="card-header">\n              ${n.name}\n              ${e(n)}\n            </div>\n            <div class="card-body">\n              <span>${n.description}</span>\n            </div>\n            <div class="card-footer text-start">\n              ${t(n)}\n            </div>\n          </div>\n        </div>`}document.querySelector("#myDemoList").innerHTML=o}else document.querySelector("#myDemoList").innerHTML='<div id="demoListInfo" class="col-6"><div class="alert alert-info alert-dismissible fade show" role="alert">\n      <i class="bi bi-info-circle me-1"></i> No deployed demos available to show.\n    </div></div>'}function showMyDemosPage(){document.querySelector("#mainContent").innerHTML='<div id="myDemoList" class="row"></div>',0===myDemoList.length?makeAjaxRequest(DEPLOYMENT_LIST,null,(function(e){myDemoList=e.demos,showMyDemoList()})):showMyDemoList()}function updateMainContent(e){let t=e.split("/"),o=t[t.length-1];if(e.indexOf("demo-list")>-1)showDemoListPage();else if(e.indexOf("my-demos")>-1)showMyDemosPage();else if(e.indexOf("demo-onboard")>-1)showDemoFormPage("Demo Onboard Form");else if(e.indexOf("demo-update")>-1)showDemoFormPage("Demo Update Form",o);else if(e.indexOf("demo-deploy")>-1)showDemoDeployPage("Demo Deployment Form",o);else{let e=BREADCRUMB_LABELS[o];document.querySelector("#mainContent").innerHTML=e?`<h2>${BREADCRUMB_LABELS[o]}</h2>`:'<div class="col-6 alert alert-danger alert-dismissible fade show" role="alert">\n          <i class="bi bi-exclamation-octagon me-1"></i> 404 - Resource not found.\n        </div>'}}function makeAjaxRequest(e,t,o){t?t.headers||(t.headers={"Content-Type":"application/json"}):t={methd:"GET",headers:{"Content-Type":"application/json"}},console.log(t),fetch(e,t).then((async function(e){if(401==e.status)openPopWindow("/authorize","oauth2",800,600),toggleVeil(!0);else{var t=await e.json();e.ok?o(t):addNotification(t.error.message,!0)}})).catch((e=>{addNotification(e,!0)}))}function updateDemo(e){setHashPath(`/demos/demo-update/${e}`)}function deleteDemo(e){let t=getDemoById(e);if(confirm(`Do you want to delete the demo - ${t.name}?`)){makeAjaxRequest(DEMO_DELETE.replace("<id>",e),{method:"DELETE"},(function(o){demoList=demoList.filter((t=>t.id!==e)),showDemoList(),addNotification(`<b>${(new Date).toLocaleString()}</b>: The demo - ${t.name} has been deleted successfully.`,!1)}))}}function copyDemoLink(e){let t=`<a href="${new URL(window.location.href).origin}/#/demos/demo-deploy/${e}" target="_blank">Deploy Demo</a>`;navigator.clipboard.writeText(t),addNotification("You copied the demo deployment link to clipboard.",!1),setTimeout((function(){document.querySelector("#linkNotification").click()}),800)}function deployDemo(e){setHashPath(`/demos/demo-deploy/${e}`)}function deploy(e){let t=DEPLOY_ENDPOINT.replace("<project>",e.project_id).replace("<region>",e.region).replace("<id>",e.demo_id),o=generateUUID();makeAjaxRequest(t,{method:"POST",body:JSON.stringify({deploy_id:o})},(function(t){let n=(new Date).toLocaleString("en-US",{timeZone:"UTC"}),i=t.metadata.build.logUrl;addNotification(`<b>${n}</b>: Your deployment is in progress. Please click <a target="_blank" href="${i}">this link</a> for details.`,!1),updateMyDemoList(e.demo_id,{id:o,project_id:e.project_id,region:e.region,log_url:i,status:"DEPLOYED",deployed_at:n}),setHashPath("/demos/my-demos")}))}function updateProjectList(){if(0===projectList.length)makeAjaxRequest(PROJECTS_ENDPOINT,{method:"GET"},(function(e){let t=[];projectList=e.projects,projectList.forEach((e=>{t.push(e.projectId)})),initCombo(".js-combobox-project",t)}));else{let e=[];projectList.forEach((t=>{e.push(t.projectId)})),initCombo(".js-combobox-project",e)}}function updateRegionList(e){makeAjaxRequest(REGIONS_ENDPOINT.replace("<project>",e),{method:"GET"},(function(e){let t=document.querySelector("#inputRegion");e.regions.forEach((e=>{t.add(new Option(e,e))}))}))}function onHashPathChanged(){let e=getHashPath();""===e?setHashPath("/dashboard"):(prevHashPath=curHashPath,curHashPath=e,updateSidebarSelected(),updateBreadcrumb(e),updateMainContent(e))}function popupCallback(e){if(console.log("popup hash: "+e),toggleVeil(!1),e.search(/\/deploy\/projects\/.+\/regions\/.+\/demos\/.+/i)>-1){let t=e.match(/\/deploy\/projects\/(.+)\/regions\/(.+)\/demos\/(.+)/i);deploy({project_id:t[1],region:t[2],demo_id:t[3]})}else if(e.search(/\/deploy\/projects\/.+\/regions/i)>-1){updateRegionList(e.match(/\/deploy\/projects\/(.+)\/regions/i)[1])}else e.search(/\/deploy\/projects/i)>-1&&updateProjectList()}function openPopWindow(e,t,o,n){var i=",width="+o+",height="+n+",top="+(screen.height-n)/2+",left="+(screen.width-o)/2;window.open(e,t,"popup=yes,toolbar=no,location=no,status=no,menubar=no,scrollbars=yes"+i).focus()}window.onload=function(){console.log("onload: "+location.hash),onHashPathChanged()},window.onhashchange=function(){console.log("onhashchange: "+location.hash),onHashPathChanged()};let notifCount=0;function addNotification(e,t){let o=`<li>\n      <hr class="dropdown-divider">\n    </li>\n    <li class="notification-item">\n      <i class="bi ${t?"bi-x-circle":"bi-check-circle"} ${t?"text-danger":"text-success"}"></i>\n      <p>${e}</p>\n    </li>`;document.querySelector("#notifications").insertAdjacentHTML("afterbegin",o),notifCount++,document.querySelector("#notifCount").innerHTML=notifCount,document.querySelector("#notifSummary").innerHTML=`You have ${notifCount} notifications.`,document.querySelector("#notifClearAll").disabled=!1}function clearAllNotifications(){let e=document.querySelector("#notifications"),t=e.children;for(let o=t.length-1;o>=0;o--)e.removeChild(t[o]);return document.querySelector("#notifClearAll").disabled=!0,document.querySelector("#notifSummary").innerHTML="You have no notifications.",document.querySelector("#notifCount").innerHTML="",notifCount=0,!1}function toggleVeil(e){document.getElementById("veil").style.display=e?"block":"none"}
